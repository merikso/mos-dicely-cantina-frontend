<app-nav></app-nav>


<!--Background image-->
<div style="
background: url('cantina.png') no-repeat center center fixed;
width: 100%;
height: 94vh;
background-size:cover;
">
    <div class="container h-100  d-flex ">
        <div class="card border-0 my-auto w-100 bg-dark">
            <div class="shadow-lg">

                <div class="form-row">   
                    <div>
                        <div class="row" style="align-items: center; margin-left: 50px;">
                            <h4>Get a new deck and get the user info before playing!</h4>
                        </div>
                        <div class="row">
                            <h2 class="card-header text-center">{{ deck_id }}</h2>
                            <button class="btn btn-secondary btn-center" (click)="[newDeck()]">Get a new deck!</button>
                            <button class="btn btn-secondary btn-center" (click)="[getUser()]">Get user Info</button>
                            <h3>id: {{ u_id }}</h3>
                            <h3 style="margin-left: 20px;">chips: {{ chips }}</h3>
                        </div>

                        <div class="form-group col-md-6">
                            
                        </div>

                        <div *ngIf="playing" class="dealer-hand">
                             <div class="cell">
                                <img style="width: 180px;height:208px;" src="face_down_match.png">
                            </div>
                            <div class="cell">
                                <img style="width: 80%;height:80%;" src="{{dealerCards[1].image}}">
                            </div> 
                            <!-- <ul class = "list-group">
                                <li class="list-group-item list-group-item-danger">
                                    <img style="width:70%;height:80%;" src="face_down_match.png">
                                </li>
                                <li class="list-group-item list-group-item-danger">
                                    <img style="width:70%;height:80%;" src="{{dealerCards[1].image}}">
                                </li>
                            </ul> -->    
                        </div>

                        <div *ngIf="!playing" class="dealer-hand">
                            <!-- show all cards in dealer and player hands-->
                            <ul *ngFor="let c of dealerCards" class="list-group">


                                <li class="list-group-item list-group-item-danger">
                                    <img style="width:70%;height:80%;" src="{{c.image}}">

                                </li>
                            </ul>
                        </div>
                        
                        <div class="player-hand">
                            <ul *ngFor="let c of playerCards" class="list-group">


                                <li class="list-group-item list-group-item-primary">
                                    <img style="width:70%;height:80%;" src="{{c.image}}">

                                </li>
                            </ul>
                        </div>

                           
                        <div *ngIf="blackjack" class="game-result">
                            <h1 style="margin-left: 30px;">Blackjack!!! Play again?</h1>
                            <h3 style="margin-left: 30px;">Enter your bet. Draw new hands to lock it in.</h3>
                            <input [(ngModel)]="bet" type="text" name="bet" class="form-control" id="bet" min=0 max='chips'>
                            <button class="btn btn-secondary btn-center" (click)="[newHands()]">Draw new hands!</button>
                        </div>

                        <div *ngIf="!inProgress && win == 1" class="game-result">
                            <h1 style="margin-left: 30px;">You Won! Play again?</h1>
                            <h3 style="margin-left: 30px;">Enter your bet. Draw new hands to lock it in.</h3>
                            <input [(ngModel)]="bet" type="text" name="bet" class="form-control" id="bet" min=0 max='chips'>
                            <button class="btn btn-secondary btn-center" (click)="[newHands()]">Draw new hands!</button>
                        </div>

                        <div *ngIf="!inProgress && win == -1" class="game-result">
                            <h1 style="margin-left: 30px;">You Lost! Play again?</h1>
                            <h3 style="margin-left: 30px;">Enter your bet. Draw new hands to lock it in.</h3>
                            <input [(ngModel)]="bet" type="text" name="bet" class="form-control" id="bet" min=0 max='chips'>
                            <button class="btn btn-secondary btn-center" (click)="[newHands()]">Draw new hands!</button>
                        </div>

                        <div *ngIf="!inProgress && win == 0" class="game-result">
                            <h1 style="margin-left: 30px;">Push (Tie). Play again?</h1>
                            <h3 style="margin-left: 30px;">Enter your bet. Draw new hands to lock it in.</h3>
                            <input [(ngModel)]="bet" type="text" name="bet" class="form-control" id="bet" min=0 max='chips'>
                            <button class="btn btn-secondary btn-center" (click)="[newHands()]">Draw new hands!</button>
                        </div>

                        <div *ngIf="inProgress" class="form-group col-md-6">
                            <h3>&nbsp;&nbsp;&nbsp; Sum: {{ pSum }}</h3>
                            <button class="btn btn-secondary btn-center"
                                (click)="[hit(), busted(), dealerLogic()]">Hit</button>
                            <button class="btn btn-secondary btn-center" (click)="[stand()]">Stand</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Jar Jar -->
    <div>
        <img style="position: absolute; height: 200px; width:200px; left:85%; top:78%;" src="jar_jar.png" (click)="[deposit(), popup()]">
    </div>
</div>